"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const events_1 = require("events");
const value_1 = require("./value");
class Subscribe extends value_1.CurrentValue {
    constructor() {
        super(...arguments);
        this.eventName = 'updated';
        this.event = new events_1.EventEmitter();
    }
    listenerCount() {
        return this.event.listenerCount(this.eventName);
    }
    hasSubscribers() {
        return !!this.listenerCount();
    }
    setCurrentValue(value) {
        if (value !== this.getCurrentValue())
            this.emit(value);
        super.setCurrentValue(value);
    }
    subscribe(fn) {
        this.event.addListener(this.eventName, (d) => fn(d));
        return () => {
            this.event.removeListener(this.eventName, fn);
        };
    }
    emit(data) {
        this.event.emit(this.eventName, data);
    }
}
exports.Subscribe = Subscribe;
//# sourceMappingURL=subscribe.js.map