import { IXyoObjectSchema, IXyoSerializableObject } from './@types'
import { XyoBaseSerializable } from './helpers/base-serializable'
import { readHeader } from './helpers/readHeader'

// this class is used to fill types that we do not know
export class XyoFiller extends XyoBaseSerializable implements IXyoSerializableObject {
  public schemaObjectId: number

  constructor (schema: IXyoObjectSchema, bytes: Buffer) {
    super(schema, bytes)

    this.schemaObjectId = readHeader(bytes).id
  }

  public getData(): Buffer | IXyoSerializableObject {
    const header = readHeader(this.origin!)
    const sizeOfSize = header.sizeIdentifierSize!
    const buff = this.origin!.subarray(2 + sizeOfSize, this.origin!.length)
    return buff
  }

  public getReadableValue(): unknown {
    return "Unknown"
  }
}
